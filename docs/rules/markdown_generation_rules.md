# Markdown 生成ルール（markdownlint準拠）

このリポジトリで Markdown を生成・編集するときは、少なくとも以下を満たす（目的: markdownlint の指摘を避け、差分を読みやすくする）。

## 1) 見出し（MD022: blanks-around-headings）

- すべての見出し（`#`〜`######`）の**直前と直後に空行を1行**入れる。
  - 例（OK）:

    ```md
    ## Methods

    本文…
    ```

  - 例（NG）:

    ```md
    ## Methods
    本文…
    ```

## 2) 箇条書き・番号付きリスト（MD032: blanks-around-lists）

- リスト（`-`/`*`/`1.` 等）の**開始前と終了後に空行を1行**入れる。
- 見出し直下がリストの場合でも、見出しの直後に空行を入れてからリストを書く。

## 3) 重複見出しの禁止（MD024: no-duplicate-heading）

- 同一ファイル内で、**同じ見出しテキスト**を複数回使わない。
  - 例: `## Background` が本文にある場合、Abstract内で `### Background` のように同名見出しを作らない。
- Abstract は、**太字だけを見出し代わりに使わない**（MD036）前提で、以下のいずれかで構造化する。

### 推奨（MD036を避ける）: Abstract専用の見出しにする

同一ファイル内で重複しない見出しテキストにするため、Abstract内は接頭辞/接尾辞を付ける。

  ```md
  ## Abstract

  ### Abstract: Background

  …

  ### Abstract: Methods

  …

  ### Abstract: Results

  …

  ### Abstract: Conclusions
  …
  ```

### 代替（許容される設定の場合のみ）: ラベルで構造化

markdownlintでMD036が有効な場合は避ける。無効であることが確実なときのみ使用する。

```md
## Abstract

**Background:** …

**Methods:** …

**Results:** …

**Conclusions:** …
```

## 4) 強調を見出し代わりにしない（MD036: no-emphasis-as-heading）

- `**...**` や `*...*` を「小見出し」の代わりに使わない。
- 小見出しが必要なら `###` 等の見出しを使い、必要に応じて `Abstract:` のような接頭辞で重複を回避する。
- 見出し直下の「サブタイトル」等も、`*（…）*` のように強調だけで独立行を作らず、通常の本文行として書くか、必要なら見出し（例: `## Subtitle`）にする。
- 図キャプションも `**Figure 1 ...**` のように強調だけの独立行にせず、`#### Figure 1 ...` のように見出しにするか、通常の本文行として書く。

## 5) 画像の代替テキスト（MD045: no-alt-text）

- すべての画像は alt text を付ける（`![](path)` を使わない）。
- 代替テキストは「ファイル名と格納先」を基本とする（機械処理と監査のため）。例:

  ```md
  ![figures/primary_interaction_smr.png](figures/primary_interaction_smr.png)
  ```

## 6) 叙述の統一（表記ルール）

- 期間/範囲（年、モデル番号、四分位など）は **ASCIIハイフン**で統一する（例: `2015-2023`, `M0-M2`, `Q1-Q4`, `A-D`）。
  - en dash（`-`）等のUnicode記号は、環境によって文字化けしやすいので避ける。
- 信頼区間は **角括弧＋カンマ区切り**で統一する。
  - 例: `95%CI [0.222, 0.951]`、負値を含む場合も同様に `95%CI [-14.94, 49.96]`
  - 診断的なレンジ（例: LOOの範囲）は `0.396-0.631` のようにハイフンで表す（CIと区別する）。
- 年齢調整は「年齢補正死亡」等の曖昧な語を避け、**間接標準化（期待死亡数をoffset）で年齢構成差を補正**した旨を明示する。
- 期待死亡は **「期待死亡数」**で統一する（例: `期待死亡数をoffsetとして...`）。
- SMRは初出で定義し、以後は同一表記にする。
  - 例: `SMR（標準化死亡比; 観測死亡数/期待死亡数）`
- W65/W66は初出で公式表記を明示し、以後は略記に寄せる。
  - 例: `W65「浴槽内での溺死及び溺水」、W66「浴槽への転落による溺死及び溺水」` → 以後 `W65/W66死亡（数）`

## 4) 実務メモ

- 形式の「0件/未確認」などの主張は、本文に書く前に `refs.md` 等に検索根拠（検索日・DB・クエリ）を残す。
- Unicode（例: en dash 等）を含む場合でも、ファイルは UTF-8 のまま扱い、変換で文字化けしないことを優先する。

## 7) Agentタスク（Codex）によるMarkdown編集

- Agentタスクによる自動編集（`$paper-writing` 等）でも、本ファイルのルールを満たすことを必須とする。
- markdownlint の設定はリポジトリ直下の `.markdownlint.json` を正とし、IDE/CIで同じルールが当たるようにする。
  - 本リポジトリでは `MD013`（line-length）と `MD034`（no-bare-urls）を既定で無効化している（既存Markdownの運用に合わせるため）。
- 編集後は、必要なら `npx --yes markdownlint-cli2 <files...>` で確認する。
- `MD024`（重複見出し）は、見出しレベルや番号が違っても「見出しテキスト」が同じなら違反になる点に注意する。
  - 例: `### 1.2 実施日` と `### 7.1 実施日` はNG、`### 7.1 実施日（英訳検討）` のように差を付ける。
